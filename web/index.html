<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MeowJS IDE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              coyote: "#766147",
              cornsilk: "#FEF9E2",
              bistre: "#331B02",
              khaki: "#C2A790",
              sunglow: "#FECD4C",
              "caf-noir": "#492F0F",
              melon: "#FEB7A2",
              chamoisee: "#997A45",
            },
            fontFamily: {
              inter: ["Inter", "sans-serif"],
              jetbrains: ["JetBrains Mono", "monospace"],
            },
          },
        },
      };
    </script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.34.0/min/vs/loader.min.js"></script>
    <style>
      body {
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        overflow: hidden;
      }

      #editor-container {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
      }

      #editor {
        flex-grow: 1;
        height: 100%;
      }

      #output-container {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
      }

      #output {
        flex-grow: 1;
        height: 100%;
      }

      @media (min-width: 768px) {
        #main-content {
          flex-direction: row;
        }

        #editor-container,
        #output-container {
          flex: 1;
        }
      }
    </style>
  </head>

  <body class="bg-cornsilk text-bistre font-inter antialiased">
    <header class="bg-sunglow text-cornsilk p-4">
      <div class="container mx-auto flex items-center justify-between">
        <div class="flex items-center space-x-3">
          <svg
            class="fill-black"
            width="48"
            height="48"
            viewBox="0 0 1024 1024"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M941.674 551.441c-7.027 7.702-15.499 7.236-24.247 5.368-3.412-.729-6.777-1.694-10.206-2.319-4.958-.902-6.7.29-6.793 5.177-.382 20.077-3.393 39.729-9.306 58.908-1 3.245.652 4.213 3.023 5.061 5.973 2.135 11.798 4.66 17.269 7.831 5.894 3.417 11.013 7.566 10.954 15.423-.072 9.45-8.3 16.106-17.539 13.977-6.533-1.505-12.601-4.315-18.67-7.023-4.146-1.851-6.2-.759-7.817 3.346-14.731 37.406-37.944 69.089-66.714 96.736-32.387 31.122-70.656 53.17-111.864 70.4-35.664 14.911-72.909 24.086-111.026 29.747-15.763 2.341-31.687 3.476-47.631 4.469-22.669 1.413-45.318 1.336-67.869-.428-45.082-3.529-89.191-12.154-131.763-27.873-29.014-10.713-56.858-23.799-82.513-41.139-49.442-33.417-87.81-76.328-111.258-131.719-1.934-4.567-3.872-5.809-8.487-3.569-5.22 2.534-10.704 4.588-16.207 6.455-8.278 2.808-16.233-.655-19.631-8.193-2.95-6.544-.143-14.456 6.832-18.916 6.221-3.978 13.169-6.389 20.067-8.824 3.609-1.274 4.926-2.814 3.758-6.951-5.488-19.451-8.254-39.336-8.354-59.561-.017-3.445-.855-4.78-4.741-3.865-6.945 1.634-13.994 2.987-21.075 3.827-6.196.735-12.031-.761-15.845-6.31-3.431-4.993-3.244-11.448.436-16.395 3.52-4.732 8.856-6.322 14.317-7.338 7.039-1.309 14.147-2.171 21.329-2.012 3.627.08 5.34-1.285 5.717-5.172 3.572-36.839 13.968-71.712 30.706-104.695 2.483-4.894 4.957-9.9 8.234-14.254 3.046-4.048 3.336-8.312 2.798-12.758-2.386-19.747-2.452-39.587-1.691-59.373 1.816-47.216 8.136-93.717 24.772-138.302 5.201-13.939 11.925-27.041 21.369-38.742 11.598-14.37 31.584-20.941 49.368-15.951 22.512 6.317 42.044 18.223 60.78 31.719 30.429 21.92 57.167 47.883 82.497 75.378 2.298 2.495 4.485 3.097 7.902 2.28 16.98-4.058 34.264-6.245 51.591-8.346 15.59-1.89 31.217-2.488 46.832-2.433 34.966.123 69.752 2.656 103.881 10.936 2.911.707 4.693.041 6.531-2.057 12.301-14.042 25.07-27.66 38.89-40.208 24.715-22.44 50.343-43.692 80.688-58.373 10.538-5.098 21.439-9.427 33.171-10.379 15.287-1.24 28.173 4.727 38.251 15.902 12.986 14.4 19.873 32.203 25.912 50.27 8.4 25.131 13.435 51.01 17.205 77.218 3.28 22.794 4.154 45.705 4.265 68.628.072 14.93-.245 29.94-2.387 44.802-.385 2.673-.319 5.245 1.259 7.689 16.618 25.732 27.46 53.851 34.549 83.541 2.898 12.142 5.05 24.391 6.173 36.817.35 3.871 1.738 6.049 6.198 5.886 8.524-.311 16.88 1.367 25.163 3.17 12.344 2.687 16.46 13.892 10.947 22.517M588.578 281.234c-8.703-1.288-17.369-2.994-26.117-3.786-27.054-2.449-54.14-3.17-81.293-1.268-25.263 1.769-50.244 5.288-74.857 11.162-10.066 2.402-17.732-.225-24.37-8.09-26.764-31.712-56.839-59.962-90.386-84.384-10.436-7.598-20.813-15.687-33.881-18.701-9.032-2.083-14.197-.231-19.384 7.307-6.777 9.848-10.975 20.887-14.505 32.207-7.545 24.195-12.148 49.03-15.243 74.111-1.607 13.019-1.825 26.209-2.676 39.322-1.331 20.49-.328 40.899 2.132 61.257.79 6.542 2.461 12.957-1.667 19.296-21.751 33.402-35.709 69.752-40.821 109.399-.508 3.945.262 5.641 4.772 5.824 17.794.718 35.478 2.558 52.841 6.781 3.637.885 6.981 2.226 9.387 5.258 3.684 4.645 4.377 10.749 1.565 15.416-3.68 6.109-9.575 6.723-15.801 5.786-8.543-1.286-17.012-3.097-25.572-4.232-9.159-1.215-18.376-2.125-27.396-1.82 0 4.44-.095 8.422.017 12.399.401 14.359 2.921 28.389 6.495 42.273.795 3.087 1.915 4.037 5.189 3.094 6.382-1.839 12.864-3.382 19.374-4.71 10.897-2.225 21.737-4.915 33.015-4.507 5.55.201 9.605 2.482 11.761 7.665 3.258 7.831-.263 15.418-8.928 17.997-7.148 2.128-14.555 3.382-21.843 5.047-9.511 2.172-19.117 4.006-28.526 7.563.381 1.274.553 2.249.952 3.121 9.831 21.481 22.152 41.436 37.393 59.482 26.558 31.444 59.452 54.772 95.945 73.131 53.266 26.797 110.076 40.373 169.448 42.874 33.768 1.423 67.531.502 101.096-4.654 42.887-6.587 84.084-18.534 123.187-37.415 55.364-26.732 99.091-65.74 127.168-121.139 2.467-4.868 4.94-9.752 6.592-15.56-5.981-2.622-12.135-3.932-18.213-5.332-9.548-2.2-19.17-4.08-28.763-6.086-4.321-.903-8.382-2.302-11.139-6.044-3.339-4.532-3.237-9.235-.612-14.059 3.027-5.562 7.97-7.229 13.882-6.819 16.647 1.154 32.914 4.623 49.039 8.652 4.694 1.173 6.417-.246 7.355-4.432 3.575-15.95 5.819-32.04 5.59-48.43-.036-2.57-.566-3.838-3.654-3.877-12.702-.16-25.215 1.339-37.681 3.551-5.065.899-10.132 2.053-15.243 2.376-8.01.505-13.605-3.905-14.469-10.682-.877-6.875 3.641-13.904 10.629-15.5 10.198-2.329 20.476-4.375 30.911-5.383 9.23-.892 18.475-1.632 27.92-2.458.14-1.153.407-2.129.351-3.086-.67-11.492-2.818-22.749-5.68-33.867-7.073-27.471-18.243-53.171-33.694-76.975-2.748-4.233-3.954-8.429-2.94-13.653 1.325-6.825 1.936-13.826 2.356-20.782 1.317-21.79.922-43.536-.698-65.344-2.348-31.619-7.44-62.676-16.292-93.097-3.492-12.003-7.669-23.792-15.007-34.134-5.177-7.297-10.824-9.349-19.505-7.2-10.42 2.578-19.063 8.659-27.718 14.529-25.899 17.567-48.682 38.79-70.648 60.944-9.158 9.236-17.725 18.998-26.084 28.953-5.808 6.917-13.061 9.068-21.934 7.189-10.718-2.269-21.332-5.113-33.122-6.46"
            />
            <path
              d="M520.879 648.157a1601 1601 0 0 1-8.354-7.943c-1.888.341-2.891 2.234-4.185 3.642-12.671 13.786-28.435 20.266-47.056 20.515-30.704.411-53.714-12.88-69.7-38.77-3.532-5.721-6.172-11.847-4.96-18.854 1.099-6.359 5.624-10.748 11.93-11.804 5.787-.969 12.749 1.998 15.482 6.965 3.449 6.269 6.612 12.642 11.414 18.109 15.654 17.819 44.11 20.091 61.04 4.671 8.974-8.173 11.306-18.799 11.197-30.361-.027-2.789-2.074-3.169-3.892-3.767-7.713-2.534-14.604-6.416-20.46-12.08-4.577-4.428-7.594-9.807-8.56-16.029-1.775-11.44 1.789-17.902 12.531-22.711 12.227-5.474 25.241-7.166 38.497-6.581 8.622.38 17.246 1.314 25.608 3.692 10.117 2.877 17.891 8.161 19.379 19.592 1.122 8.628-2.451 15.566-8.078 21.654-5.444 5.891-12.286 9.678-19.819 12.112-3.592 1.16-4.831 2.965-4.778 6.83.207 15.154 5.974 27.046 20.074 33.463 16.129 7.34 31.75 5.792 46.191-4.815 6.293-4.622 11.146-10.433 14.303-17.649 1.463-3.344 2.959-6.734 5.821-9.218 5.381-4.67 13.273-5.125 18.974-1.111 5.317 3.743 7.511 12.475 4.685 19.491-6.828 16.953-19.099 29.011-34.667 37.99-24.952 14.393-62.334 12.081-82.617-7.033m211.184-406.102c7.515-7.147 15.184-13.544 23.698-18.853 10.665-6.649 18.688-3.76 22.099 8.27 5.76 20.319 9.751 40.954 11.639 62.056 1.605 17.946 1.906 35.879 1.872 53.856-.007 3.861-.451 7.64-1.134 11.394-1.634 8.997-10.859 13.274-18.722 8.581-7.503-4.478-13.02-11.36-19.731-16.832-16.934-13.806-34.531-26.636-53.26-37.908-12.25-7.371-13.288-13.421-5.237-25.175 11.253-16.429 24.136-31.414 38.776-45.389m34.326 29.969c-1.896-9.034-3.237-18.212-6.608-26.976-2.684.823-4.281 2.572-5.991 4.088a263.2 263.2 0 0 0-38.162 42.014c-4.253 5.834-4.424 5.878 1.655 9.791 16.938 10.904 33.175 22.766 48.883 35.368 1.214.974 2.337 2.348 4.358 2.066.292-3.69.754-7.269.694-10.955-.3-18.293-1.793-36.472-4.829-55.396m-530.713 83.829c-3.251-41.799.734-82.465 11.878-122.426.668-2.394 1.423-4.815 2.538-7.021 3.021-5.973 9.022-8.082 15.174-5.471 7.313 3.103 13.385 8.092 19.36 13.148 18.941 16.029 35.361 34.322 48.939 55.12 2.19 3.354 4.531 6.828 4.459 10.951-.085 4.947-3.223 8.126-7.339 10.562a440 440 0 0 0-57.136 40.23c-5.122 4.254-9.85 8.979-14.944 13.266-10.591 8.913-20.049 5.591-22.929-8.359m40.539-102.559c-3.363-2.538-5.888-6.236-10.581-7.859-2.774 8.346-4.379 16.615-5.854 24.919-3.613 20.328-5.207 40.833-5.375 61.461-.02 2.419-.2 5.002 2.812 6.883 18.071-14.906 36.995-28.634 57.321-41.128-11.127-16.482-23.999-30.538-38.323-44.276m52.142 250.062c-8.862 4.048-15.787 9.735-21.005 17.641-5.202 7.881-13.585 9.541-21.239 4.671-7.158-4.553-9.523-14.035-4.613-21.49 13.819-20.986 33.27-33.037 58.411-35.518 22.093-2.18 42.356 2.595 59.875 16.654 8.132 6.527 15.1 14.134 17.674 24.738 1.719 7.087-1.086 13.816-6.84 16.565-7.147 3.416-14.256 1.774-18.702-5.316-7.724-12.317-19.103-18.756-32.865-21.384-10.349-1.976-20.536-.654-30.696 3.439m405.966-11.666c4.534 5.14 8.901 9.949 11.052 16.292 2.77 8.172.744 14.622-5.811 18.099-7.451 3.953-15.926 2.508-20.495-4.181-8.373-12.259-19.841-19.428-34.298-21.974-18.195-3.205-40.157 4.502-49.233 20.27-3.519 6.113-9.869 8.972-15.477 7.79-9.387-1.978-13.599-9.384-10.754-19.419 3.005-10.597 10.266-18.17 18.675-24.655 30.707-23.683 78.183-20.616 106.341 7.778M286.981 753.041c-5.687-3.382-12.445-3.656-17.227-8.128-.571-.534-1.141-1.068-1.439-2.06 8.8 2.242 16.052 7.62 24.828 11.313-2.908 1.339-4.281-.192-6.162-1.125"
            />
          </svg>
          <h1 class="text-2xl text-black">MeowJS IDE</h1>
        </div>
      </div>
    </header>

    <main
      id="main-content"
      class="flex flex-col md:flex-row flex-grow p-4 space-y-4 md:space-y-0 md:space-x-4"
    >
      <div id="editor-container" class="bg-white rounded-lg p-4 flex flex-col">
        <h2 class="text-2xl font-semibold text-chamoisee mb-4">Code Editor:</h2>
        <div
          id="editor"
          class="rounded-md overflow-hidden border border-gray-300"
        ></div>
        <button
          id="run"
          class="mt-4 bg-sunglow text-caf-noir font-semibold py-2 px-6 rounded-full hover:bg-melon transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-sunglow focus:ring-opacity-75"
        >
          Run MeowJS Code
        </button>
      </div>

      <div id="output-container" class="bg-white rounded-lg p-4 flex flex-col">
        <h2 class="text-2xl font-semibold text-chamoisee mb-4">Output:</h2>
        <pre
          id="output"
          class="bg-khaki text-bistre p-4 rounded-md font-jetbrains overflow-auto border border-gray-300"
        ></pre>
      </div>
    </main>

    <footer class="bg-chamoisee text-cornsilk p-4 mt-auto">
      <div class="container mx-auto text-center text-sm">MeowJS IDE.</div>
    </footer>

    <script type="module">
      require.config({
        paths: {
          vs: "https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.34.0/min/vs",
        },
      });
      require(["vs/editor/editor.main"], async function () {
        const editor = monaco.editor.create(document.getElementById("editor"), {
          value:
            '## Write your MeowJS code here\n\n"Hello World!" meow stretch;\n"Welcome to MeowJS!" meow stretch;',
          language: "meowjs",
          theme: "vs-dark",
          fontFamily: "JetBrains Mono",
          fontSize: 14,
          automaticLayout: true,
        });

        monaco.languages.register({
          id: "meowjs",
        });

        monaco.languages.setMonarchTokensProvider("meowjs", {
          keywords: [
            "meow",
            "purr",
            "hiss",
            "scratch",
            "nap",
            "groom",
            "pounce",
            "stretch",
            "hunt",
            "yarn",
            "ball",
            "whiskers",
            "tail",
            "climb",
            "fall",
            "catnip",
            "paw",
            "litter",
            "box",
            "prowl",
            "stalk",
            "nest",
            "fetch",
            "leap",
            "duck",
            "sniff",
            "tower",
            "crouch",
          ],
          tokenizer: {
            root: [
              [
                /[a-zA-Z_]\w*/,
                {
                  cases: {
                    "@keywords": "keyword",
                    "@default": "identifier",
                  },
                },
              ],
              [/"([^"\\]|\\.)*\$"/, "string.invalid"], // unclosed string
              [/"/, { token: "string", bracket: "@open", next: "@string" }],
              [/#.*$/, "comment"],
              [/\d+/, "number"],
              [/[\]+\-*/=><?!.,;:&|^~]/, "operator"],
              [/[[\]{}()]/, "delimiter.bracket"],
            ],
            string: [
              [/[^"\\]+/, "string"],
              [/\\./, "string.escape.invalid"],
              [/"/, { token: "string", bracket: "@close", next: "@pop" }],
            ],
          },
        });

        monaco.languages.registerCompletionItemProvider("meowjs", {
          provideCompletionItems: (model, position) => {
            const word = model.getWordUntilPosition(position);
            const range = {
              startLineNumber: position.lineNumber,
              endLineNumber: position.lineNumber,
              startColumn: word.startColumn,
              endColumn: word.endColumn,
            };

            const keywords = [
              "meow",
              "purr",
              "hiss",
              "scratch",
              "nap",
              "groom",
              "pounce",
              "stretch",
              "hunt",
              "yarn",
              "ball",
              "whiskers",
              "tail",
              "climb",
              "fall",
              "catnip",
              "paw",
              "litter",
              "box",
              "prowl",
              "stalk",
              "nest",
              "fetch",
              "leap",
              "duck",
              "subtract",
              "sniff",
              "tower",
              "crouch",
            ];

            const operators = [
              ">",
              "+",
              "-",
              "?",
              ".",
              "0",
              "*",
              "!",
              "[",
              "]",
              "{",
              "}",
              "^",
              "v",
              ";",
            ];

            const suggestions = [
              ...keywords.map((keyword) => ({
                label: keyword,
                kind: monaco.languages.CompletionItemKind.Keyword,
                insertText: keyword,
                range: range,
              })),
              ...operators.map((operator) => ({
                label: operator,
                kind: monaco.languages.CompletionItemKind.Operator,
                insertText: operator,
                range: range,
              })),
            ];

            return { suggestions: suggestions };
          },
        });

        document.getElementById("run").addEventListener("click", function () {
          const code = editor.getValue();
          let output = "";
          try {
            const lines = code.split("\n");
            for (const line of lines) {
              const match = line.match(/"([^"]+)"\s+meow\s+stretch\s*;/);
              if (match) {
                output += match[1] + "\n";
              }
            }
            if (!output) output = "(No output)";
          } catch (e) {
            output = "Error: " + e.message;
          }
          document.getElementById("output").textContent = output;
        });
      });
    </script>
  </body>
</html>
